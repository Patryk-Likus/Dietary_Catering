<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Dietary Catering</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="admin-style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
</head>
<body>

<header>
    <div class="top-bar">
        <div class="div-top-bar">
            <img class="img-top" th:src="@{'/images/free.png'}">
            <label class="top-label">Darmowa dostawa</label>
        </div>
        <div class="div-top-bar">
            <img class="img-top" th:src="@{'/images/calendar.png'}">
            <label class="top-label">Natychmiastowa realizacja</label>
        </div>
        <div class="div-top-bar">
            <img class="img-top" th:src="@{'/images/car.png'}">
            <label class="top-label">Dowóz autochłodniami</label>
        </div>

    </div>

    <nav class="nav-bar">

        <ul class="nav-links">
            <!--        <li><a href="index" target="blank">Strona Główna</a></li>-->
            <li><a href="diets" target="blank">Diety</a></li>
            <li><a href="price-list" target="blank">Cennik</a></li>
        </ul>
        <a href="index" target="blank"><img src="images/logo.png" alt="Logo" class="logo-img"></a>
        <ul class="nav-links">
            <li><a href="kontakt" target="blank">Kontakt</a></li>
            <li>

                <!--                //-->
                <div class="dropdown">
                    <button class="dropbtn">
                        <img src="images/user-drop.png" alt="Login" class="user-drop-img">
                    </button>
                    <div class="dropdown-content">
                        <!--                        <div class="header">-->
                        <!--                        </div>-->
                        <div class="row">
                            <div class="column">
                                <a sec:authorize="!isAuthenticated()" href="login">Logowanie</a>
                                <a sec:authorize="!isAuthenticated()" href="registry">Rejestracja</a>
                                <a sec:authorize="isAuthenticated()" href="#">Ustawienia</a>
                                <a sec:authorize="isAuthenticated()" href="#">Koszyk</a>
                                <a sec:authorize="isAuthenticated()" href="#">Historia</a>
                                <a sec:authorize="hasAuthority('ADMIN')" class="" href="/admin">Admin panel</a>
                                <form sec:authorize="isAuthenticated()" action="#" th:action="@{/logout}" method="post">
                                    <input type="submit" value="Wyloguj"/>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!--                //-->
            </li>
        </ul>
    </nav>
</header>

<main>


    <div id="admin-buttons">
        <ul>
            <li>
                <button href="javascript:void(null)" onclick="showhide('diets-panel');" class="admin-button">Diety
                </button>
            </li>
            <li>
                <button href="javascript:void(null)" onclick="showhide('history-panel');" class="admin-button">
                    Historia
                </button>
            </li>
            <li>
                <button href="javascript:void(null)" onclick="showhide('person-panel');" class="admin-button">
                    Użytkownicy
                </button>
            </li>
            <li>
                <button href="javascript:void(null)" onclick="showhide('messages-panel');" class="admin-button">
                    Wiadomości
                </button>
            </li>
        </ul>
    </div>

    <div id="content-panels">
        <div id="diets-panel" class="admin-table-container">

            <h2>Diety</h2>
            <br>

            <a th:href="@{/admin/showNewFoodForm}" class="update-button">Dodaj dietę</a>
            <br>


            <div class="admin-table-container">
                <table class="admin-table">
                    <tr>
                        <th>ID</th>
                        <th>Nazwa robocza</th>
                        <th>Nazwa grafiki</th>
                        <th>Nazwa główna</th>
                        <th>Cena</th>
                        <th>Opis Diety</th>
                        <th>Akcje</th>

                    </tr>
                    <tr th:each="food : ${foodList}">
                        <td th:text="${food.id}"></td>
                        <td th:text="${food.nameDiet}"></td>
                        <td th:text="${food.imgLink}"></td>
                        <td th:text="${food.nameDisplay}"></td>
                        <td th:text="${food.price}"></td>
                        <td th:text="${food.description}"></td>
                        <td><a th:href="@{/admin/showUpdateFoodForm/{id}(id=${food.id})}"
                               class="update-button">Update</a>
                            <a th:href="@{/deleteFood/{id}(id=${food.id})}">Delete</a>
                        </td>


                    </tr>
                </table>
            </div>

        </div>


        <div id="history-panel">
            HISTORIA

            <div class="admin-table-container">
                <table class="admin-table">
                    <tr>
                        <th>ID</th>
                        <th>Imię</th>
                        <th>Nazwisko</th>
                        <th>Dieta</th>
                        <th>Cena</th>
                        <th>Data zamówienia</th>
                        <th>Akcje</th>
                    </tr>
                    <tr th:each="oH : ${orderHistory}">
                        <td th:text="${oH.id}"></td>
                        <td th:text="${oH.person.name}"></td>
                        <td th:text="${oH.person.surname}"></td>
                        <td th:text="${oH.food.nameDisplay}"></td>
                        <td th:text="${oH.food.price}"></td>
                        <td th:text="${oH.localDateTime}"></td>
                        <!--                        <td><a th:href="@{/admin/showUpdateFoodForm/{id}(id=${food.id})}">Update</a>-->
                        <td><a th:href="@{/deleteOrderHistory/{id}(id=${oH.id})}">Delete</a>
                        </td>
                    </tr>

                </table>
            </div>
        </div>
        <div id="person-panel">

            OSOBY


            <div class="admin-table-container">
                <table class="admin-table">
                    <tr>
                        <th>ID</th>
                        <th>Imię</th>
                        <th>Nazwisko</th>
                        <th>Email</th>
                        <th>Nr Telefonu</th>
                        <th>Kod pocztowy</th>
                        <th>Miasto</th>
                        <th>Adres</th>
                        <th>Login</th>
                        <th>Hasło</th>
                        <th>Rola</th>
                        <th>Aktywne konto</th>
                    </tr>
                    <tr th:each="person : ${personsList}">
                        <td th:text="${person.id}"></td>
                        <td th:text="${person.name}"></td>
                        <td th:text="${person.surname}"></td>
                        <td th:text="${person.email}"></td>
                        <td th:text="${person.phoneNumber}"></td>
                        <td th:text="${person.postCode}"></td>
                        <td th:text="${person.city}"></td>
                        <td th:text="${person.streetAndNumber}"></td>
                        <td th:text="${person.login}"></td>
                        <td th:text="${person.password}"></td>
                        <td th:text="${person.role}"></td>
                        <td th:text="${person.enabled}"></td>
                    </tr>
                </table>
            </div>

        </div>
        <div class="table-person">
            <div class="admin-table-container">
                <table class="admin-table">
                    <tr>
                        <th>ID</th>
                        <th>Imię</th>
                        <th>Nazwisko</th>
                        <th>Email</th>
                        <th>Numer Telefonu</th>
                        <th>Kod pocztowy</th>
                        <th>Miasto</th>
                        <th>Ulica i numer budynku</th>
                        <th>Login</th>
                        <th>Hasło</th>
                        <th>Rola</th>
                        <th>Aktywne konto</th>
                    </tr>
                    <tr th:each="person : ${personsList}">
                        <td th:text="${person.id}"></td>
                        <td th:text="${person.name}"></td>
                        <td th:text="${person.surname}"></td>
                        <td th:text="${person.email}"></td>
                        <td th:text="${person.phoneNumber}"></td>
                        <td th:text="${person.postCode}"></td>
                        <td th:text="${person.city}"></td>
                        <td th:text="${person.streetAndNumber}"></td>
                        <td th:text="${person.login}"></td>
                        <td th:text="${person.password}"></td>
                        <td th:text="${person.role}"></td>
                        <td th:text="${person.enabled}"></td>
                    </tr>
                </table>
            </div>
        </div>
        <div id="messages-panel">
            WIADOMOSCI
            <div class="admin-table-container">

                <table class="admin-table">
                    <tr>
                        <th>ID</th>
                        <th>Imię</th>
                        <th>Nazwisko</th>
                        <th>Email</th>
                        <th>Wiadomość</th>
                        <th>Akcje</th>

                    </tr>
                    <tr th:each="contact : ${contactList}">
                        <td th:text="${contact.id}"></td>
                        <td th:text="${contact.name}"></td>
                        <td th:text="${contact.surname}"></td>
                        <td th:text="${contact.email}"></td>
                        <td th:text="${contact.message}"></td>
                        <td><a th:href="@{/admin/showUpdateContact/{id}(id=${contact.id})}">Update</a>
                            <a th:href="@{/deleteContact/{id}(id=${contact.id})}">Delete</a></td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

</main>

<footer>


</footer>


<script src="scriptAdminButton.js"></script>
</body>
</html>